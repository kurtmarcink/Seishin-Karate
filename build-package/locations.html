<!DOCTYPE html>
<!--BUILD:MODERNIZR-->
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<!--END:MODERNIZR-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Locations - Seishin Martial Arts / Sport Karate Academy</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--BUILD:BEGINSCRIPTS-->
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/social.css">
    <script src="js/modernizr.min.js"></script>
    <!--END:BEGINSCRIPTS-->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <style>
        #map{
            height: 500px;
            width: 100%;
            margin-top: 20px;
        }
    </style>
    <script>
        function initialize() {
            var natickJson, natickHtml, medwayJson, medwayHtml, sherbornJson, sherbornHtml, locations;
            natickId = {
                placeId: "ChIJldxiFlWG44kRIcGAOMhoOvQ"
            },
                    medwayId = {
                        placeId: "ChIJ0fcOX_Fw5IkRG9qI1CSPhec"
                    },
                    sherbornId = {
                        placeId: "ChIJWXXKjxB45IkRc1Mr--1Wl9k"
                    }
            locations = [
                [42.299368, -71.293149, "Seishin Wellesley"],
                [42.288411, -71.336564, "Seishin Natick"],
                [42.151688, -71.412065, "Seishin Medway"],
                [42.240563, -71.369701, "Seishin Sherborn"],
                [42.323506, -71.325346, "Seishin Weston"]

            ];

            var infowindow = new google.maps.InfoWindow({maxWidth: 200});
            var service = new google.maps.places.PlacesService(map);
            $.when(
                            service.getDetails(natickId, function(place, status) {
                                if (status == google.maps.places.PlacesServiceStatus.OK) {
                                    natickJson = place;
                                }
                            }),
                            service.getDetails(medwayId, function(place, status) {
                                if (status == google.maps.places.PlacesServiceStatus.OK) {
                                    medwayJson = place;
                                }
                            }),
                            service.getDetails(sherbornId, function(place, status) {
                                if (status == google.maps.places.PlacesServiceStatus.OK) {
                                    sherbornJson = place;
                                }
                            })
                    ).then(function() {
                        map = new google.maps.Map(document.getElementById('map'), {
                            center: new google.maps.LatLng(42.240524, -71.369647),
                            zoom: 11
                        });
                        for (i = 0; i < locations.length; i++) {
                            marker = new google.maps.Marker({
                                position: new google.maps.LatLng(locations[i][0], locations[i][1]),
                                map: map,
                                title: locations[i][2]
                            });
                            google.maps.event.addListener(marker, 'click', (function (marker, i) {
                                return function () {
                                    var html;
                                    if (marker.title === "Seishin Medway") {
                                        html = '<b>Seishin Medway</b>&nbsp;&nbsp;' + getClosed(medwayJson) + '<br>' +
                                               '<a href="tel:508-533-1501">(508) 533-1501</a><br>' +
                                                '<a href="https://plus.google.com/107453042588075303931/about?hl=en&review=1" target="_blank"><span class="glyphicon glyphicon-pencil" style="font-size: 20px;padding-left: 3px; padding-right: 5px;" title="Write a Review of Seishin in Medway"></span></a>' +
                                                '<a href="https://maps.google.com/maps?saddr=My+Location&daddr=Seishin+Karate+Medway,+MA" target="_blank"><span class="glyphicon glyphicon-road" style="font-size: 20px;padding-left: 5px; padding-right: 5px" title="Directions to Seishin in Medway"></span></a>' +
                                                '<a href="#"><i class="fa fa-info-circle" title="More Information" style="font-size: 27px; padding-left: 7px"></i></a>' + '<br>' +
                                                getPhotos(medwayJson);
                                    }
                                    else if (marker.title === "Seishin Sherborn") {
                                        html = '<b>Seishin Sherborn</b>&nbsp;&nbsp;' + getClosed(sherbornJson)  + '<br>' +
                                                '<a href="tel:508-433-0901">(508) 433-0901</a><br>' +
                                                '<a href="https://plus.google.com/115315292366238841081/about?hl=en&review=1" target="_blank"><span class="glyphicon glyphicon-pencil" style="font-size: 20px;padding-left: 3px; padding-right: 3px;" title="Write a Review of Seishin in Sherborn"></span></a>' +
                                                '<a href="https://maps.google.com/maps?saddr=My+Location&daddr=Seishin+Karate+Sherborn,+MA" target="_blank"><span class="glyphicon glyphicon-road" style="font-size: 20px;padding-left: 3px" title="Directions to Seishin in Sherborn"></span></a>' +
                                                '<a href="#"><i class="fa fa-info-circle" title="More Information" style="font-size: 27px; padding-left: 7px"></i></a>' + '<br>' +
                                                getPhotos(sherbornJson);
                                    }
                                    else if (marker.title === "Seishin Natick") {
                                        html = '<b>Seishin Natick</b>&nbsp;&nbsp;' + getClosed(natickJson) + '<br>' +
                                                '<a href="tel:508-433-0901">(508) 433-0901</a><br>' +
                                                '<a href="https://plus.google.com/100706843756981282186/about?hl=en&review=1" target="_blank"><span class="glyphicon glyphicon-pencil" style="font-size: 20px;padding-left: 3px; padding-right: 3px;" title="Write a Review of Seishin in Natick"></span></a>' +
                                                '<a href="https://maps.google.com/maps?saddr=My+Location&daddr=Seishin+Karate+Natick,+MA" target="_blank"><span class="glyphicon glyphicon-road" style="font-size: 20px;padding-left: 3px" title="Directions to Seishin in Natick"></span></a>' +
                                                '<a href="#"><i class="fa fa-info-circle" title="More Information" style="font-size: 27px; padding-left: 7px"></i></a>' + '<br>' +
                                                getPhotos(natickJson);
                                    }
                                    infowindow.setContent(html);
                                    infowindow.open(map, marker);
                                }
                            })(marker, i));
                        }
                    })

            function getClosed(json) {
                console.log(json.opening_hours);
                if (json.opening_hours.open_now) {
                    return '<i class="fa fa-circle" style="color:#23D613" data-toggle="tooltip" title="Currently Open"></i>'
                }
                else {
                    return '<i class="fa fa-circle" style="color:#ed4b43" data-toggle="tooltip" title="Currently Closed"></i>'
                }
            }
            function getPhotos(json) {
                photos = "";
                for (i = 0; i < 4; i++) {
                    photos += '<a href="' + json.photos[i].getUrl({'maxHeight': json.photos[i].height}) + '" target="_blank"><img src="' + json.photos[i].getUrl({'maxHeight': 25}) + '" style="padding: 5px 1px" title="Click to Enlarge">';
                }
                console.log(photos);
                return photos;
            }

        }


        function loadScript() {
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&' + 'callback=initialize';
            document.body.appendChild(script);
        }

        window.onload = loadScript;
    </script>
</head>
<body id="locations">
<!--BUILD:NAVBAR-->
<!--[if lte IE 7]>
<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->
<div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">Seishin</a>
        </div>
        <div class="navbar-collapse collapse" id="navbar">
            <ul class="nav navbar-nav">
                <li class="dropdown">
                    <a href="about.html" class="dropdown-toggle disabled" data-toggle="dropdown">About <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="history.html">History</a></li>
                        <li><a href="locations.html">Locations</a></li>
                        <li><a href="staff.html">Staff</a></li>
                        <li><a href="tournaments.html">Tournaments</a></li>
                    </ul>
                <li id="programs-nav"><a href="programs.html">Programs</a></li>
                <li><a href="social.html">Social</a></li>
                <li><a href="contact.html">Contact Us</a></li>
                </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="social-li"><a href="http://www.facebook.com/seishinmaska" target="_blank" title="facebook" class="social facebook" style="color: blue;"></a></li>
                <li class="social-li"><a href="http://instagram.com/seishin_karate" target="_blank" title="instagram" class="social instagram"></a></li>
                <li class="social-li"><a href="http://twitter.com/seishin_karate" target="_blank" title="twitter" class="social twitter"></a></li>
                <li class="social-li"><a href="http://youtube.com/seishinkarate" target="_blank" title="youtube" class="social youtube"></a></li>
                <li class="social-li"><a href="http://www.yelp.com/biz/seishin-martial-arts-sport-karate-academy-medway" title="yelp" target="_blank" class="social yelp"></a></li>
            </ul>
        </div><!--/.navbar-collapse -->
    </div>
</div>
<!--END:NAVBAR-->
<div class="container">
    <div id="map"></div>
    <!--BUILD:FOOTER-->
<hr>
<footer>
    <p>&copy; <script>document.write(new Date().getFullYear())</script> <a class="no-link-decor" href="about.html">Seishin Martial Arts / Sport Karate Academy</a></p>
</footer>
    <!--END:FOOTER-->
</div>
<!-- /container -->
<!--BUILD:ENDSCRIPTS-->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')</script>

<script src="js/bootstrap.min.js"></script>

<script src="js/plugins.min.js"></script>
<script src="js/main.min.js"></script>

<script type="text/javascript">
    var __lc = {};
    __lc.license = 4653671;

    (function() {
        var lc = document.createElement('script'); lc.type = 'text/javascript'; lc.async = true;
        lc.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn.livechatinc.com/tracking.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(lc, s);
    })();
</script>

<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','UA-XXXXX-X');ga('send','pageview');
</script>
<!--END:ENDSCRIPTS-->
</body>
</html>
